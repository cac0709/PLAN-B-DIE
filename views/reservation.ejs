<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>首頁</title>
    <link rel="stylesheet" href="/css/homepage.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="/kendo/css/kendo.common-material.min.css">
    <link rel="stylesheet" href="/kendo/css/kendo.material.min.css">
    
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="/kendo/js/kendo.all.min.js"></script>
 

 
</head>

<body>
    <img
        src="https://1.bp.blogspot.com/-5LGvxa85lK4/XeZzyMnlLaI/AAAAAAAARtM/IJTYFA6b35QWYmQHhta9u1cTPFiAGqI8gCLcBGAsYHQ/s1600/homeTitlePicture.jpg">
    <div id="container">
        <nav>
            <div id="logo">
                會議管理系統
            </div>
            <ul id="menu">
                <li><a href="/homepage">首頁</a></li>
                <li style="background-color: black;"><a href="/reservation">會議查詢/預約</a></li>
                <li><a href="/checkin">會議簽到</a></li>
                <li><a href="/record">會議記錄</a></li>
                <li><a href="/edit">編輯會議/參加人員</a></li>
            </ul>
        </nav>
        <header>

            <div id="links">
                <a href="/logout">登出</a>
            </div>
            <div id="user-name">
                <h3>使用者:<%= user.username %></h3>
            </div>
        </header>

        <main>
                <div class="inputer" name="meetingname" type= "text" >
                    <label for="meetingname">會議名稱：</label>
                    <input name="meetingname" class="inparea"type="text"id="meetingname">
                </div>
                <div class="inputer" name="meetinroomcode" type= "text" >
                    <label for="meetingroomcode">會議編號：</label>
                    <input name="meetingroomcode" class="inparea"type="text"id="meetingroomcode">
                </div>
                <div class="inputer" name="room" type= "text" >
                    <label for="meetingroom">會議室編號：</label>          
                    <select name="meetingroom" class="inparea"type="int"id="meetingroom">
                        <option value ="1" >一號會議室</option>
                        <option value = "2">二號會議室</option>
                        <option value = "3">三號會議室</option>
                        <option value = "4">四號會議室</option>
                    </select>
                </div>                          
                <div class="inputer" name="opendate"  type="Date" >
                    <label for="opendate">開會日期：</label>
                    <input type="date" name="opendate" class="inparea" type="Date"id="opendate">
                </div>
                      
                <div class="inputer" name="start" type="text">
                    <label for="StartTime">開始時間：</label>
                    <select name="StartTime" class="inparea" type="text"id="StartTime">
                        <option value ="7:00">7:00</option>
                        <option value ="8:00">8:00</option>
                        <option value ="9:00">9:00</option>
                        <option value ="10:00">10:00</option>
                        <option value ="11:00">11:00</option>
                        <option value ="12:00">12:00</option>
                        <option value ="13:00">13:00</option>
                        <option value ="14:00">14:00</option>
                        <option value ="15:00">15:00</option>
                        <option value ="16:00">16:00</option>
                        <option value ="17:00">17:00</option>
                    </select>
                </div>        
                <div class="inputer"  name="end" type="text">
                    <label for="endtime">結束時間：</label>
                    <select name="endtime" class="inparea"type="text" id="endtime">
                        <option value ="8:00">8:00</option>
                        <option value ="9:00">9:00</option>
                        <option value ="10:00">10:00</option>
                        <option value ="11:00">11:00</option>
                        <option value ="12:00">12:00</option>
                        <option value ="13:00">13:00</option>
                        <option value ="14:00">14:00</option>
                        <option value ="15:00">15:00</option>
                        <option value ="16:00">16:00</option>
                        <option value ="17:00">17:00</option>
                        <option value ="18:00">18:00</option>
                    </select>
                </div>
                <div class="inputer" name="unit" type="text">
                    <label for="department">開會單位：</label>
                    <select name="department" class="inparea"type="text"id="department">
                                                      <option value ="婦產科">婦產科</option>
                                                      <option value ="精神科">精神科</option>
                                                      <option value ="泌尿科">泌尿科</option>
                                                      <option value ="科科">科科</option>
                    </select>
                </div>   
                <div class="inputer" name="meetingname" type= "text" >
                    <textarea style="width:300px;height:100px;"id = "note">輸入備註
                    </textarea>
                </div>           
                <div id="example" role="application">
                    <div class="demo-section k-content">
                    </div>                  
                </div>
                <div class="form-btn" id="form-btn">
                    <button class="btn btn-danger btn_botton" id="clean_btn">清除</button>
                    <button class="btn btn-primary btn_botton" id="insert_btn">新增</button>
                    <button class="btn btn-default btn_botton" id="insertmember_btn">新增人員</button>
                </div>  
                <div id="data_grid" class="col-12" style="margin: 4%;margin-top: 0%;"></div>
                <div class="uk-card  uk-text-left" id="objList_window" style="display:none">
                <div id="record_grid"></div>       
                </div>
     <!--研究中    <div id="example" role="application">
                    <div class="demo-section k-content">
                        <select id="listbox1"></select>
                        <select id="listbox2"></select>
                        <div id="appendto"></div>
                    </div>
                    <span id="staticNotification"></span>
                
                    <div class="box wide">
                        <div class="box-col">
                            <h3>Working with selected items</h3>
                            <div class="box-col">
                                <ul class="options">
                                    <li>
                                        <h4>Transfer item</h4>
                                        <button id="transfer-left" class="k-button">To left</button>
                                        <button id="transfer-right" class="k-button">To right</button>
                                    </li>
                                </ul>
                            </div>
                            <div class="box-col">
                                <ul class="options">
                                    <li>
                                        <h4>Move item</h4>
                                        <button id="move-up" class="k-button">Move Up</button>
                                        <button id="move-down" class="k-button">Move Down</button>
                                    </li>
                
                                </ul>
                            </div>
                            <div class="box-col">
                                <ul class="options">
                                    <li>
                                        <h4>Enable/Disable item</h4>
                                        <button id="disable" class="k-button">Disable</button>
                                        <button id="enable" class="k-button">Enable</button>
                                    </li>
                
                                </ul>
                            </div>
                        </div>
                        <div class="box-col">
                            <h3 class="clear">Add/Remove items</h3>
                            <div class="box-col">
                                <ul class="options">
                                    <li>
                                        <h4>Add item</h4>
                                        <input type="text" id="add-textbox" class="k-textbox" name="name" value="New Product" />
                                        <button id="add-item" class="k-button">Add</button>
                                    </li>
                                </ul>
                            </div>
                            <div class="box-col">
                                <ul class="options">
                                    <li>
                                        <h4>Remove by text (Contains)</h4>
                                        <input type="text" id="remove-textbox" class="k-textbox" name="name" value="Chef" />
                                        <button id="remove-item" class="k-button">Remove</button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>        --->
            </main>
            
    </div>
</body>
    <script>   
    $(document).ready(function(){
        $("#clean_btn").click(function(){
        $("#department").val("");
        $("#StartTime").val("");
        $("#endtime").val("");
        $("#opendate").val("");
        $("#meetingroom").val("");
        $("#meetingname").val("");
        $("#meetingroomcode").val("");
        $("#selected").val("");
        $("#note").val("");
            });
        });
/*志威叫我研究的
        var notification = $("#staticNotification").kendoNotification({
            autoHideAfter: 4000, appendTo: "#appendto",
            animation: {
                open: {
                    effects: "fade:in"
                },
                close: {
                    effects: "none"
                }
            }
        }).data("kendoNotification");

        var listbox1 = $("#listbox1").kendoListBox({
            dataTextField: "ProductName",
            dataValueField: "ProductID",
            dataSource: {
                type: "odata",
                serverPaging: true,
                transport: {
                    read: {
                        url: "https://demos.telerik.com/kendo-ui/service/Northwind.svc/Products",
                    }
                },
                pageSize: 10
            },
            connectWith: "listbox2",
        }).data("kendoListBox");

        var listbox2 = $("#listbox2").kendoListBox({
            dataTextField: "ProductName",
            dataValueField: "ProductID",
            dataSource: []
        }).data("kendoListBox");

        function showMessage(message) {
            notification.hide();
            notification.error(message);
        }

        $("#transfer-left").click(function () {
            if (listbox2.select().length > 0) {
                listbox1.add(listbox2.dataItem(listbox2.select()));
                listbox2.remove(listbox2.select());
            }
            else {
                showMessage("Right ListBox should have selected item!");
            }
        })

        $("#transfer-right").click(function () {
            if (listbox1.select().length > 0) {
                listbox2.add(listbox1.dataItem(listbox1.select()));
                listbox1.remove(listbox1.select());
            }
            else {
                showMessage("Left ListBox should have selected item!");
            }
        })

        $("#enable").click(function () {
            listbox1.enable(".k-item", true);
            listbox2.enable(".k-item", true);
        })

        $("#disable").click(function () {
            if (listbox1.select().length > 0 || listbox2.select().length > 0) {
                listbox1.enable(listbox1.select(), false);
                listbox2.enable(listbox2.select(), false);
            }
            else {
                showMessage("You need to select an item to be disabled!");
            }
        })

        $("#move-up").click(function () {
            if (listbox1.select().length > 0) {
                if (listbox1.select().first().index() > 0) {
                    var item = listbox1.select().first();
                    listbox1.reorder(item, item.index() - 1);
                }
                else {
                    showMessage("Selected item is already at first position!");
                }
            }
            else {
                showMessage("Left ListBox should have selected item!");
            }
        })

        $("#move-down").click(function () {
            if (listbox1.select().length > 0) {
                if (listbox1.select().first().index() < listbox1.items().length - 1) {
                    var item = listbox1.select().first();
                    listbox1.reorder(item, item.index() + 1);
                }
                else {
                    showMessage("Selected item is already at last position!");
                }
            }
            else {
                showMessage("Left ListBox should have selected item!");
            }
        })

        var Product = kendo.data.Model.define({
            id: "ProductID",
            fields: {
                "ProductName": {
                    type: "string"
                }
            }
        });

        $("#add-item").click(function () {
            var text = $("#add-textbox").val();
            var item = listbox1.add(new Product({
                ProductName: text
            }));
        })

        $("#remove-item").click(function () {
            var text = $("#remove-textbox").val().toLowerCase();
            var items = listbox1.items();
            for (var i = 0; i < items.length; i++) {
                var dataItem = listbox1.dataItem(items[i]);
                if (dataItem.ProductName.toLowerCase().indexOf(text) >= 0) {
                    listbox1.remove(items[i]);
                }
            }
        });
        */








//新增人員 沒反應
        var gridCount = 0;
     $("#Member_btn").click(function(){
         console.log("work"); 
        if (gridCount != 0) {
        $("#data_grid").data('kendoGrid').destroy();
        }
        $("#title_bar").show();
        gridCount++;
        /*var params = {
                "USERNAME" :USERNAME,
                "NAME" : NAME,
                "MEMBERDEPARTMENT" : MEMBERDEPARTMENT,
                "SIGN" : SIGN
              
        };
*/
       $("#data_grid").kendoGrid({
                  dataSource:{
                        transport: {
                            read: {
                                method: "post",
                                url: "/memberinsertforsearch",
                                dataType: "json"
                            }
                        },
                        schema: {
                            model: {
                                fields: {
                                    USERNAME: { type: "string" },
                                    NAME: { type: "string" },
                                    MEMBERDEPARTMENT: { type: "string" },
                                    SIGN: { type: "string" },
                                }
                            }
                        },
                        pageSize: 20,
                    },
                  height:600,
                  columns:[
                          {field:"USERNAME",title:"員工編號",width:"8%"},
                          {field:"NAME",title:"員工姓名",width:"10%"},
                          {field:"MEMBERDEPARTMENT",title:"部門",width:"10%"},
                          {field:"SIGN",title:"簽到狀況",width:"10%"}
                         
                  ],
                  sortable:true,
                  scrollable: true,
                                sortable: true,
                                pageable: {
                                    input: true,
                                    numeric: false
                                },
     });
    });

         $("#insert_btn").click(function(){
         var params = {
           "DEPARTMENT" : $("#department").val(),
           "STARTTIME" : $("#StartTime").val(),
            "ENDTIME" : $("#endtime").val(),
            "OPENDATE" : $("#opendate").val(),
            "MEETINGROOM" : $("#meetingroom").val(),
            "MEETINGNAME" : $("#meetingname").val(),
            "MEETINGROOMCODE" : $("#meetingroomcode").val(),
            "NOTE" : $("#note").val(),

        };
    $.ajax({
    type:"post",
    url:"/insert",
    dataType:"json",
    data: params
    }).done(function(e){
    if(e == true){
        alert("新增成功");
    }
})
} 
);

    </script>
    

    
</html>